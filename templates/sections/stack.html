<section id="stack">
  <h2 class="font-bold text-xl text-center my-3">Tecnologias</h2>

  <div class="grid grid-cols-3 md:grid-cols-6 lg:grid-cols-8 gap-4 mt-3">
    {% for item in stack.all %}
      <div class="wow animate__fadeIn bg-base-300 flex flex-col justify-center items-center space-y-4 w-full h-auto p-4 text-center rounded h-full shadow border-2 border-transparent hover:shadow-lg hover:border-accent transition-all duration-300 ease-in-out" data-wow-delay="0s">
        <figure class="aspect-square flex items-center justify-center">
          {% if item.logo %}
            <img src="{{ item.url_logo }}" alt="{{ item.name }}" height="64" width="64" class="bw-logo" />
          {% else %}
            <i class="devicon-{{ item.name|lower }}-plain text-[40px] md:text-[56px] lg:text-[64px] w-full h-full max-w-[64px] max-h-[64px] color-primary"></i>
          {% endif %}
        </figure>

        <p class="font-bold flex justify-center items-center break-words">{{ item.name }}</p>
        {% for key, value in item.get_time_worked.items %}
          <p>
            {{ key }}: {{ value }}<br />
          </p>
        {% endfor %}
      </div>
    {% endfor %}
  </div>
</section>
<script>
  // Apply smaller delays on mobile and limit the maximum delay on desktop for .wow.animate__fadeIn cards
  document.addEventListener('DOMContentLoaded', function () {
    const isMobile = window.innerWidth < 768 // md: 768px
    const delayStep = isMobile ? 0.05 : 0.08 // desktop faster
    const maxDelay = isMobile ? 0.4 : 0.6 // limit max delay
    document.querySelectorAll('.wow.animate__fadeIn').forEach(function (el, idx) {
      var delay = Math.min(idx * delayStep, maxDelay)
      el.setAttribute('data-wow-delay', delay.toFixed(2) + 's')
    })
  })
</script>
